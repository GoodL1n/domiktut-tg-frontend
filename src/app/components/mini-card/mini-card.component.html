<div class="mini-card" (click)="route()">
    <div class="embla" emblaCarousel [options]="options" [subscribeToEvents]="['init', 'reInit', 'scroll']"
        (emblaChange)="onEmblaChanged($event)">
        <div class="embla__container">
            <div class="embla__slide" *ngFor="let img of imgs$ | async; trackBy: track ">
                <img [src]="img" alt="">
            </div>
        </div>
        <div class="embla__dots">
            @for (dot of acountDotSignal(); track $index) {
            <button class="embla__dot" type="button" [class]="currendDot === $index ? 'embla__dot-active' : ''"
                (click)="handleScrollTo($index)"></button>
            }
        </div>
        <div class="embla__additional-info">
            <div class="embla__rating">
                <svg width="10" height="10" viewBox="0 0 10 10" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path
                        d="M4.32643 0.642951L3.17071 3.09123L0.584928 3.4851C0.121222 3.55536 -0.064614 4.15264 0.271661 4.49473L2.14241 6.39936L1.69995 9.08987C1.6203 9.5762 2.11056 9.94048 2.52117 9.71304L4.83439 8.44267L7.14761 9.71304C7.55822 9.93863 8.04847 9.5762 7.96883 9.08987L7.52636 6.39936L9.39711 4.49473C9.73339 4.15264 9.54755 3.55536 9.08385 3.4851L6.49807 3.09123L5.34234 0.642951C5.13527 0.206552 4.53528 0.201004 4.32643 0.642951Z"
                        fill="#FFC738" />
                </svg>
                <span>{{house.rating ?? 5.0}}</span>
            </div>
            <div class="embla__people">
                <svg width="9" height="10" viewBox="0 0 9 10" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M4.51926 0.547974C3.3728 0.547974 2.44421 1.55485 2.44421 2.79797C2.44421 4.0411 3.3728 5.04797 4.51926 5.04797C5.66572 5.04797 6.5943 4.0411 6.5943 2.79797C6.5943 1.55485 5.66572 0.547974 4.51926 0.547974Z" fill="black"/>
                    <path d="M0.369019 8.42297C0.369019 6.92672 3.13401 6.17297 4.5191 6.17297C5.90419 6.17297 8.66919 6.92672 8.66919 8.42297V9.54797H0.369019V8.42297Z" fill="black"/>
                    </svg>
                    
                <span>{{house.number_of_people}}</span>
            </div>
        </div>
    </div>
    <div class="mini-card__container">
        <div class="mini-card__text">
            <div class="mini-card__title">{{house.house_name}}</div>
            <div class="mini-card__price">
                от {{calcMinPrice(house)}} ₽
            </div>
            <!-- <div class="mini-card__address">{{house.adress}}</div> -->
        </div>
        <div class="mini-card__actions">
            <button class="mini-card__favourite" [style.background]="house.isFav ? '#FFFFFF' : '#FE680A'"
                (click)="changeFavourite(); $event.stopPropagation()">
                <svg width="26" height="23" viewBox="0 0 26 23" fill="none" xmlns="http://www.w3.org/2000/svg"
                    *ngIf="!house.isFav">
                    <mask id="path-1-inside-1_89_551" fill="white">
                        <path fill-rule="evenodd" clip-rule="evenodd"
                            d="M2.51658 12.003L13.176 22.6624L13.1761 22.6623L13.1761 22.6624L23.8355 12.003C26.5115 9.32704 26.5115 4.98851 23.8355 2.31259C21.1596 -0.363339 16.8211 -0.363339 14.1451 2.31259L13.1761 3.28168L12.207 2.31258C9.53103 -0.363341 5.1925 -0.363339 2.51658 2.31259C-0.159347 4.98851 -0.159346 9.32704 2.51658 12.003Z" />
                    </mask>
                    <path fill-rule="evenodd" clip-rule="evenodd"
                        d="M2.51658 12.003L13.176 22.6624L13.1761 22.6623L13.1761 22.6624L23.8355 12.003C26.5115 9.32704 26.5115 4.98851 23.8355 2.31259C21.1596 -0.363339 16.8211 -0.363339 14.1451 2.31259L13.1761 3.28168L12.207 2.31258C9.53103 -0.363341 5.1925 -0.363339 2.51658 2.31259C-0.159347 4.98851 -0.159346 9.32704 2.51658 12.003Z"
                        fill="white" />
                    <path
                        d="M13.176 22.6624L12.0132 23.8252L13.176 24.9881L14.3388 23.8252L13.176 22.6624ZM2.51658 12.003L1.35373 13.1658L2.51658 12.003ZM13.1761 22.6623L14.3389 21.4995L13.1761 20.3366L12.0132 21.4995L13.1761 22.6623ZM13.1761 22.6624L12.0133 23.8252L13.1761 24.9881L14.339 23.8252L13.1761 22.6624ZM23.8355 12.003L24.9984 13.1658L23.8355 12.003ZM13.1761 3.28168L12.0132 4.44452L13.1761 5.60737L14.3389 4.44452L13.1761 3.28168ZM12.207 2.31258L13.3698 1.14974L13.3698 1.14974L12.207 2.31258ZM2.51658 2.31259L3.67942 3.47543L2.51658 2.31259ZM14.3388 21.4995L3.67942 10.8401L1.35373 13.1658L12.0132 23.8252L14.3388 21.4995ZM12.0132 21.4995L12.0132 21.4995L14.3388 23.8252L14.3389 23.8252L12.0132 21.4995ZM14.339 21.4995L14.3389 21.4995L12.0132 23.8252L12.0133 23.8252L14.339 21.4995ZM22.6727 10.8401L12.0133 21.4995L14.339 23.8252L24.9984 13.1658L22.6727 10.8401ZM22.6727 3.47543C24.7064 5.50913 24.7064 8.80642 22.6727 10.8401L24.9984 13.1658C28.3165 9.84766 28.3165 4.46789 24.9984 1.14974L22.6727 3.47543ZM15.308 3.47543C17.3417 1.44173 20.639 1.44173 22.6727 3.47543L24.9984 1.14974C21.6802 -2.16841 16.3004 -2.16841 12.9823 1.14974L15.308 3.47543ZM14.3389 4.44452L15.308 3.47543L12.9823 1.14974L12.0132 2.11883L14.3389 4.44452ZM11.0441 3.47543L12.0132 4.44452L14.3389 2.11883L13.3698 1.14974L11.0441 3.47543ZM3.67942 3.47543C5.71313 1.44173 9.01041 1.44173 11.0441 3.47543L13.3698 1.14974C10.0517 -2.16841 4.67188 -2.16841 1.35373 1.14974L3.67942 3.47543ZM3.67942 10.8401C1.64572 8.80642 1.64572 5.50913 3.67942 3.47543L1.35373 1.14974C-1.96441 4.46789 -1.96441 9.84767 1.35373 13.1658L3.67942 10.8401Z"
                        fill="#282727" mask="url(#path-1-inside-1_89_551)" />
                </svg>

                <svg width="26" height="23" viewBox="0 0 26 23" fill="none" xmlns="http://www.w3.org/2000/svg"
                    *ngIf="house.isFav">
                    <mask id="path-1-inside-1_89_433" fill="white">
                        <path fill-rule="evenodd" clip-rule="evenodd"
                            d="M2.51658 11.907L13.176 22.5664L13.1761 22.5664L13.1761 22.5664L23.8355 11.907C26.5115 9.23106 26.5115 4.89253 23.8355 2.21661C21.1596 -0.459317 16.8211 -0.459317 14.1451 2.21661L13.1761 3.1857L12.207 2.2166C9.53103 -0.459319 5.1925 -0.459317 2.51658 2.21661C-0.159347 4.89253 -0.159346 9.23107 2.51658 11.907Z" />
                    </mask>
                    <path fill-rule="evenodd" clip-rule="evenodd"
                        d="M2.51658 11.907L13.176 22.5664L13.1761 22.5664L13.1761 22.5664L23.8355 11.907C26.5115 9.23106 26.5115 4.89253 23.8355 2.21661C21.1596 -0.459317 16.8211 -0.459317 14.1451 2.21661L13.1761 3.1857L12.207 2.2166C9.53103 -0.459319 5.1925 -0.459317 2.51658 2.21661C-0.159347 4.89253 -0.159346 9.23107 2.51658 11.907Z"
                        fill="#FE680A" />
                    <path
                        d="M13.176 22.5664L12.0132 23.7293L13.176 24.8921L14.3388 23.7293L13.176 22.5664ZM2.51658 11.907L1.35373 13.0698L2.51658 11.907ZM13.1761 22.5664L14.3389 21.4035L13.1761 20.2407L12.0132 21.4035L13.1761 22.5664ZM13.1761 22.5664L12.0133 23.7293L13.1761 24.8921L14.339 23.7293L13.1761 22.5664ZM23.8355 11.907L24.9984 13.0698L23.8355 11.907ZM14.1451 2.21661L12.9823 1.05376L14.1451 2.21661ZM13.1761 3.1857L12.0132 4.34855L13.1761 5.51139L14.3389 4.34855L13.1761 3.1857ZM12.207 2.2166L13.3698 1.05376L13.3698 1.05376L12.207 2.2166ZM2.51658 2.21661L3.67942 3.37945L2.51658 2.21661ZM14.3388 21.4036L3.67942 10.7441L1.35373 13.0698L12.0132 23.7293L14.3388 21.4036ZM12.0132 21.4035L12.0132 21.4036L14.3388 23.7293L14.3389 23.7292L12.0132 21.4035ZM14.339 21.4036L14.3389 21.4035L12.0132 23.7292L12.0133 23.7293L14.339 21.4036ZM22.6727 10.7441L12.0133 21.4036L14.339 23.7293L24.9984 13.0698L22.6727 10.7441ZM22.6727 3.37945C24.7064 5.41316 24.7064 8.71044 22.6727 10.7441L24.9984 13.0698C28.3165 9.75169 28.3165 4.37191 24.9984 1.05376L22.6727 3.37945ZM15.308 3.37945C17.3417 1.34575 20.639 1.34575 22.6727 3.37945L24.9984 1.05376C21.6802 -2.26438 16.3004 -2.26439 12.9823 1.05376L15.308 3.37945ZM14.3389 4.34855L15.308 3.37945L12.9823 1.05376L12.0132 2.02285L14.3389 4.34855ZM11.0441 3.37945L12.0132 4.34855L14.3389 2.02286L13.3698 1.05376L11.0441 3.37945ZM3.67942 3.37945C5.71313 1.34575 9.01041 1.34575 11.0441 3.37945L13.3698 1.05376C10.0517 -2.26439 4.67188 -2.26438 1.35373 1.05376L3.67942 3.37945ZM3.67942 10.7441C1.64572 8.71044 1.64572 5.41316 3.67942 3.37945L1.35373 1.05376C-1.96441 4.37191 -1.96441 9.75169 1.35373 13.0698L3.67942 10.7441Z"
                        fill="#282727" mask="url(#path-1-inside-1_89_433)" />
                </svg>

            </button>
        </div>
    </div>
</div>