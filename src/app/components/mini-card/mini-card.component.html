<div class="mini-card" (click)="route()">
    <div class="embla" emblaCarousel [options]="options" [subscribeToEvents]="['init', 'reInit', 'scroll']"
        (emblaChange)="onEmblaChanged($event)">
        <div class="embla__container">
            <div class="embla__slide" *ngFor="let img of imgs$ | async; trackBy: track ">
                <img [src]="img" alt="">
            </div>
        </div>
        <div class="embla__dots">
            @for (dot of acountDotSignal(); track $index) {
            <button class="embla__dot" type="button" [class]="currendDot === $index ? 'embla__dot-active' : ''"
                (click)="handleScrollTo($index)"></button>
            }
        </div>
        <div class="embla__additional-info">
            <div class="embla__rating">
                <svg width="10" height="10" viewBox="0 0 10 10" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path
                        d="M4.32643 0.642951L3.17071 3.09123L0.584928 3.4851C0.121222 3.55536 -0.064614 4.15264 0.271661 4.49473L2.14241 6.39936L1.69995 9.08987C1.6203 9.5762 2.11056 9.94048 2.52117 9.71304L4.83439 8.44267L7.14761 9.71304C7.55822 9.93863 8.04847 9.5762 7.96883 9.08987L7.52636 6.39936L9.39711 4.49473C9.73339 4.15264 9.54755 3.55536 9.08385 3.4851L6.49807 3.09123L5.34234 0.642951C5.13527 0.206552 4.53528 0.201004 4.32643 0.642951Z"
                        fill="#FFC738" />
                </svg>
                <span>{{house.rating ?? 5.0}}</span>
            </div>
            <div class="embla__people">
                <svg width="9" height="10" viewBox="0 0 9 10" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path
                        d="M4.51926 0.547974C3.3728 0.547974 2.44421 1.55485 2.44421 2.79797C2.44421 4.0411 3.3728 5.04797 4.51926 5.04797C5.66572 5.04797 6.5943 4.0411 6.5943 2.79797C6.5943 1.55485 5.66572 0.547974 4.51926 0.547974Z"
                        fill="black" />
                    <path
                        d="M0.369019 8.42297C0.369019 6.92672 3.13401 6.17297 4.5191 6.17297C5.90419 6.17297 8.66919 6.92672 8.66919 8.42297V9.54797H0.369019V8.42297Z"
                        fill="black" />
                </svg>

                <span>{{house.number_of_people}}</span>
            </div>
        </div>
    </div>
    <div class="mini-card__container">

        <div class="mini-card__text">
            <div class="mini-card__title">{{house.house_name}}</div>
            <div class="mini-card__price">
                от {{calcMinPrice(house)}} ₽
            </div>
            <!-- <div class="mini-card__address">{{house.adress}}</div> -->
        </div>
        <div class="mini-card__actions">
            <button class="mini-card__favourite" [style.background]="house.isFav ? '#FFFFFF' : '#FE680A'"
                (click)="changeFavourite(); $event.stopPropagation()">
                <svg width="26" height="23" viewBox="0 0 26 23" fill="none" xmlns="http://www.w3.org/2000/svg"
                    *ngIf="!house.isFav">
                    <mask id="path-1-inside-1_89_551" fill="white">
                        <path fill-rule="evenodd" clip-rule="evenodd"
                            d="M2.51658 12.003L13.176 22.6624L13.1761 22.6623L13.1761 22.6624L23.8355 12.003C26.5115 9.32704 26.5115 4.98851 23.8355 2.31259C21.1596 -0.363339 16.8211 -0.363339 14.1451 2.31259L13.1761 3.28168L12.207 2.31258C9.53103 -0.363341 5.1925 -0.363339 2.51658 2.31259C-0.159347 4.98851 -0.159346 9.32704 2.51658 12.003Z" />
                    </mask>
                    <path fill-rule="evenodd" clip-rule="evenodd"
                        d="M2.51658 12.003L13.176 22.6624L13.1761 22.6623L13.1761 22.6624L23.8355 12.003C26.5115 9.32704 26.5115 4.98851 23.8355 2.31259C21.1596 -0.363339 16.8211 -0.363339 14.1451 2.31259L13.1761 3.28168L12.207 2.31258C9.53103 -0.363341 5.1925 -0.363339 2.51658 2.31259C-0.159347 4.98851 -0.159346 9.32704 2.51658 12.003Z"
                        fill="white" />
                    <path
                        d="M13.176 22.6624L12.0132 23.8252L13.176 24.9881L14.3388 23.8252L13.176 22.6624ZM2.51658 12.003L1.35373 13.1658L2.51658 12.003ZM13.1761 22.6623L14.3389 21.4995L13.1761 20.3366L12.0132 21.4995L13.1761 22.6623ZM13.1761 22.6624L12.0133 23.8252L13.1761 24.9881L14.339 23.8252L13.1761 22.6624ZM23.8355 12.003L24.9984 13.1658L23.8355 12.003ZM13.1761 3.28168L12.0132 4.44452L13.1761 5.60737L14.3389 4.44452L13.1761 3.28168ZM12.207 2.31258L13.3698 1.14974L13.3698 1.14974L12.207 2.31258ZM2.51658 2.31259L3.67942 3.47543L2.51658 2.31259ZM14.3388 21.4995L3.67942 10.8401L1.35373 13.1658L12.0132 23.8252L14.3388 21.4995ZM12.0132 21.4995L12.0132 21.4995L14.3388 23.8252L14.3389 23.8252L12.0132 21.4995ZM14.339 21.4995L14.3389 21.4995L12.0132 23.8252L12.0133 23.8252L14.339 21.4995ZM22.6727 10.8401L12.0133 21.4995L14.339 23.8252L24.9984 13.1658L22.6727 10.8401ZM22.6727 3.47543C24.7064 5.50913 24.7064 8.80642 22.6727 10.8401L24.9984 13.1658C28.3165 9.84766 28.3165 4.46789 24.9984 1.14974L22.6727 3.47543ZM15.308 3.47543C17.3417 1.44173 20.639 1.44173 22.6727 3.47543L24.9984 1.14974C21.6802 -2.16841 16.3004 -2.16841 12.9823 1.14974L15.308 3.47543ZM14.3389 4.44452L15.308 3.47543L12.9823 1.14974L12.0132 2.11883L14.3389 4.44452ZM11.0441 3.47543L12.0132 4.44452L14.3389 2.11883L13.3698 1.14974L11.0441 3.47543ZM3.67942 3.47543C5.71313 1.44173 9.01041 1.44173 11.0441 3.47543L13.3698 1.14974C10.0517 -2.16841 4.67188 -2.16841 1.35373 1.14974L3.67942 3.47543ZM3.67942 10.8401C1.64572 8.80642 1.64572 5.50913 3.67942 3.47543L1.35373 1.14974C-1.96441 4.46789 -1.96441 9.84767 1.35373 13.1658L3.67942 10.8401Z"
                        fill="#282727" mask="url(#path-1-inside-1_89_551)" />
                </svg>

                <svg width="26" height="23" viewBox="0 0 26 23" fill="none" xmlns="http://www.w3.org/2000/svg"
                    *ngIf="house.isFav">
                    <mask id="path-1-inside-1_89_433" fill="white">
                        <path fill-rule="evenodd" clip-rule="evenodd"
                            d="M2.51658 11.907L13.176 22.5664L13.1761 22.5664L13.1761 22.5664L23.8355 11.907C26.5115 9.23106 26.5115 4.89253 23.8355 2.21661C21.1596 -0.459317 16.8211 -0.459317 14.1451 2.21661L13.1761 3.1857L12.207 2.2166C9.53103 -0.459319 5.1925 -0.459317 2.51658 2.21661C-0.159347 4.89253 -0.159346 9.23107 2.51658 11.907Z" />
                    </mask>
                    <path fill-rule="evenodd" clip-rule="evenodd"
                        d="M2.51658 11.907L13.176 22.5664L13.1761 22.5664L13.1761 22.5664L23.8355 11.907C26.5115 9.23106 26.5115 4.89253 23.8355 2.21661C21.1596 -0.459317 16.8211 -0.459317 14.1451 2.21661L13.1761 3.1857L12.207 2.2166C9.53103 -0.459319 5.1925 -0.459317 2.51658 2.21661C-0.159347 4.89253 -0.159346 9.23107 2.51658 11.907Z"
                        fill="#FE680A" />
                    <path
                        d="M13.176 22.5664L12.0132 23.7293L13.176 24.8921L14.3388 23.7293L13.176 22.5664ZM2.51658 11.907L1.35373 13.0698L2.51658 11.907ZM13.1761 22.5664L14.3389 21.4035L13.1761 20.2407L12.0132 21.4035L13.1761 22.5664ZM13.1761 22.5664L12.0133 23.7293L13.1761 24.8921L14.339 23.7293L13.1761 22.5664ZM23.8355 11.907L24.9984 13.0698L23.8355 11.907ZM14.1451 2.21661L12.9823 1.05376L14.1451 2.21661ZM13.1761 3.1857L12.0132 4.34855L13.1761 5.51139L14.3389 4.34855L13.1761 3.1857ZM12.207 2.2166L13.3698 1.05376L13.3698 1.05376L12.207 2.2166ZM2.51658 2.21661L3.67942 3.37945L2.51658 2.21661ZM14.3388 21.4036L3.67942 10.7441L1.35373 13.0698L12.0132 23.7293L14.3388 21.4036ZM12.0132 21.4035L12.0132 21.4036L14.3388 23.7293L14.3389 23.7292L12.0132 21.4035ZM14.339 21.4036L14.3389 21.4035L12.0132 23.7292L12.0133 23.7293L14.339 21.4036ZM22.6727 10.7441L12.0133 21.4036L14.339 23.7293L24.9984 13.0698L22.6727 10.7441ZM22.6727 3.37945C24.7064 5.41316 24.7064 8.71044 22.6727 10.7441L24.9984 13.0698C28.3165 9.75169 28.3165 4.37191 24.9984 1.05376L22.6727 3.37945ZM15.308 3.37945C17.3417 1.34575 20.639 1.34575 22.6727 3.37945L24.9984 1.05376C21.6802 -2.26438 16.3004 -2.26439 12.9823 1.05376L15.308 3.37945ZM14.3389 4.34855L15.308 3.37945L12.9823 1.05376L12.0132 2.02285L14.3389 4.34855ZM11.0441 3.37945L12.0132 4.34855L14.3389 2.02286L13.3698 1.05376L11.0441 3.37945ZM3.67942 3.37945C5.71313 1.34575 9.01041 1.34575 11.0441 3.37945L13.3698 1.05376C10.0517 -2.26439 4.67188 -2.26438 1.35373 1.05376L3.67942 3.37945ZM3.67942 10.7441C1.64572 8.71044 1.64572 5.41316 3.67942 3.37945L1.35373 1.05376C-1.96441 4.37191 -1.96441 9.75169 1.35373 13.0698L3.67942 10.7441Z"
                        fill="#282727" mask="url(#path-1-inside-1_89_433)" />
                </svg>

            </button>
        </div>
        <svg class="mini-card__svg-background" width="195" height="22" viewBox="0 0 195 22" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path opacity="0.13" fill-rule="evenodd" clip-rule="evenodd"
                d="M82.0973 8.04547C79.7028 4.61917 76.0255 2.04947 71.7496 1.02158C69.8682 0.421981 67.2172 0.0793457 64.3951 0.0793457C61.573 0.0793457 59.0075 0.421981 57.0406 1.02158C52.7647 2.04947 49.173 4.61917 46.693 8.04547C44.6406 10.8722 43.5288 14.3841 43.5288 18.2387V24.8343C43.5288 28.6032 44.7261 32.1152 46.693 35.0275C49.0019 38.3682 52.4226 40.7666 56.442 41.8801C58.4089 42.5654 61.231 43.0793 64.3951 43.0793C67.5593 43.0793 70.3814 42.651 72.3483 41.8801C76.3676 40.7666 79.7883 38.2825 82.0973 35.0275C84.1497 32.1152 85.3469 28.6889 85.3469 24.8343V18.2387C85.3469 14.3841 84.1497 10.8722 82.0973 8.04547ZM74.2296 17.4678V25.4339C74.2296 28.0036 73.2889 30.4021 71.8352 32.2865L71.322 32.8005C67.6448 36.8264 61.231 36.8264 57.5537 32.8005L57.0406 32.2865C55.5013 30.4021 54.6461 28.0036 54.6461 25.4339V17.4678C54.6461 14.8981 55.5868 12.4997 57.0406 10.6152C57.0406 10.6152 57.0406 10.5296 57.1261 10.5296C60.8889 5.90406 67.9869 5.90406 71.7496 10.5296C71.7496 10.5296 71.7496 10.6152 71.8352 10.6152C73.2889 12.4997 74.2296 14.8981 74.2296 17.4678ZM0 5.81832V38.1111C0 40.7665 2.13795 42.9079 4.78899 42.9079H20.8663C30.6153 42.9079 38.5685 35.0275 38.5685 25.1769V18.5813C38.5685 8.81632 30.7008 0.850178 20.8663 0.850178H4.78899C2.13795 1.02149 0 3.16294 0 5.81832ZM16.4194 36.9119H10.2621V7.01752H16.4194C22.4911 7.01752 27.3656 11.9 27.3656 17.9816V25.9478C27.3656 32.0295 22.4911 36.9119 16.4194 36.9119ZM158.978 42.9081C156.156 42.9081 153.847 40.5954 153.847 37.7687V6.1611C153.847 3.33441 156.156 1.02166 158.978 1.02166C161.8 1.02166 164.109 3.33441 164.109 6.1611V37.7687C164.109 40.681 161.8 42.9081 158.978 42.9081ZM194.639 21.2368L206.612 35.8842C208.065 37.7687 207.98 40.424 206.184 41.9659C204.388 43.5077 201.652 43.2507 200.112 41.3663L187.798 26.2906L184.89 22.8643V37.7687C184.89 40.5954 182.581 42.9081 179.759 42.9081C176.937 42.9081 174.628 40.5954 174.628 37.7687V6.1611C174.628 3.33441 176.937 1.02166 179.759 1.02166C182.581 1.02166 184.89 3.33441 184.89 6.1611V19.695L187.028 17.0396L198.402 2.64914C199.856 0.764682 202.592 0.507721 204.474 1.9639C206.355 3.42007 206.612 6.16109 205.158 8.04555L194.639 21.2368ZM143.584 6.84635V7.18897V7.70292V39.0535C143.584 41.195 141.874 42.9081 139.736 42.9081C137.598 42.9081 135.888 41.195 135.888 39.0535V12.8424V10.0157L134.947 12.3284L134.862 12.4997L124.086 37.0834C124.086 37.1691 124.001 37.3404 123.915 37.426C123.06 39.4818 120.837 40.938 118.357 40.7667C116.475 40.681 114.765 39.6531 113.824 38.1969L113.824 38.1968C113.568 37.8542 113.311 37.5116 113.14 37.0834L102.365 12.4997L102.279 12.3284L101.339 10.0157V12.8424V39.0535C101.339 41.195 99.6283 42.9081 97.4904 42.9081C95.3525 42.9081 93.6421 41.195 93.6421 39.0535V7.70292C93.6421 7.56146 93.668 7.44596 93.6913 7.34212C93.7104 7.25734 93.7276 7.18034 93.7276 7.10334C93.6421 7.01768 93.6421 6.93201 93.6421 6.84635C93.4711 3.84834 96.4642 1.27863 100.312 1.02166H100.398H101.082H101.424H101.681C103.049 1.10732 104.246 1.53559 105.273 2.1352C106.47 2.82045 107.239 3.67703 107.838 4.79058V4.87624C107.838 4.91907 107.859 4.9619 107.881 5.00472C107.902 5.04755 107.924 5.09037 107.924 5.1332L118.357 29.7169L118.613 30.2308L118.87 29.7169L129.303 5.1332C129.303 5.04754 129.303 4.9619 129.388 4.87624V4.79058C129.987 3.67703 130.757 2.7348 131.954 2.1352C132.98 1.53559 134.177 1.10732 135.546 1.02166H135.802H136.144H136.829H136.914C140.762 1.27863 143.755 3.84834 143.584 6.84635Z"
                fill="white" />
        </svg>

    </div>
</div>