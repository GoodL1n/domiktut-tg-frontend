<div class="search-container">
    <app-header></app-header>
    <app-search-start style="width: 100%;" (click)="closeContainer()"></app-search-start>
    <div class="search-container__search-collections search-collections">
        <div class="search-collections__search">
            <input class="search-collections__input" type="text" placeholder="Поиск по названию"
                [formControl]="searchInputControl" [matAutocomplete]="auto">
            <mat-autocomplete #auto="matAutocomplete">
                @for (house of filteredHouses$ | async; track house) {
                <mat-option [value]="house.house_name">{{house.house_name}}</mat-option>
                }
            </mat-autocomplete>
        </div>
        <div class="search-collections__collections collections">
            <span class="collections__title">Рекомендуемые подборки</span>
            <div class="collection" routerLink='/collection' [queryParams]="{'collectionType': 'family'}">
                <div class="collection__img card1"></div>
                <span class="collection__title">
                    Подборка домов: семейные и уютные
                </span>
            </div>
            <div class="collection" routerLink='/collection' [queryParams]="{'collectionType': 'family'}">
                <div class="collection__img card2"></div>
                <span class="collection__title">
                    Подборка домов: дома с бассейном
                </span>
            </div>
            <div class="collection" routerLink='/collection' [queryParams]="{'collectionType': 'family'}">
                <div class="collection__img card3"></div>
                <span class="collection__title">
                    Подборка домов: для большой компании
                </span>
            </div>
        </div>
    </div>
    <form class="search-container__filters filters" [formGroup]="formFilters">
        <div class="filters__row">
            <div class="filters__input">
                <input type="tel" id="dateOfArrival" formControlName="date_of_arrival" placeholder="Когда заезд?">
                <label for="dateOfArrival">Указать дату</label>
            </div>
            <div *ngIf="formFiltersConrols['date_of_arrival'].touched && formFiltersConrols['date_of_arrival'].errors?.['pattern']"
                class="filters__error">
                Допустимый формат 'дд.мм.гггг'</div>
        </div>
        <div class="filters__row">
            <div class="filters__input">
                <input class="test" type="tel" id="dateOfDeparture" formControlName="date_of_departure"
                    placeholder="Когда выезд?">
                <label for="dateOfDeparture">Указать дату</label>
            </div>
            <div *ngIf="formFiltersConrols['date_of_departure'].touched && formFiltersConrols['date_of_departure'].errors?.['pattern']"
                class="filters__error">
                Допустимый формат 'дд.мм.гггг'</div>
        </div>
        <div class="filters__row">
            <div class="filters__input">
                <input type="number" id="number_of_people" formControlName="number_of_people" placeholder="Сколько?">
                <label for="number_of_people">Кол-во человек</label>
            </div>
            <div *ngIf="formFiltersConrols['number_of_people'].touched && (formFiltersConrols['number_of_people'].errors?.['min'] || formFiltersConrols['number_of_people'].errors?.['max'])"
                class="filters__error">
                Недопустимое значение</div>
        </div>
    </form>
    <div class="search-container__btns btns">
        <div class="btns__clear" (click)="clearForm()">Очистить фильтры</div>
        <button class="btns__submit" (click)="sumbitForm()"
            [disabled]="formFilters.invalid && !searchInputControl.value">
            <svg width="39" height="37" viewBox="0 0 39 37" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path
                    d="M38.8972 18.1621V28.5089C38.8972 32.9117 35.3367 36.4781 30.941 36.4781H16.5231C14.7208 36.4781 13.3142 35.0251 13.3142 33.264C13.3142 31.4588 14.7648 30.0499 16.5231 30.0499H29.2267C31.0289 30.0499 32.4355 28.5969 32.4355 26.8357V17.9859C32.4355 16.9733 31.952 16.0046 31.1608 15.3882L22.4573 8.82792C20.8309 7.59511 18.5451 7.59511 16.9187 8.82792L8.34706 15.3002C7.46792 15.9606 6.94044 17.0173 6.94044 18.1621V33.308C6.94044 35.1132 5.48985 36.5221 3.73157 36.5221C1.92933 36.5221 0.522705 35.0692 0.522705 33.308V18.4703C0.522705 15.1241 2.10516 11.998 4.74258 10.0167L6.98439 8.3436L14.3692 2.79597L15.1604 2.22359C17.8858 0.198257 21.6221 0.198257 24.3474 2.22359L25.1387 2.79597L32.5235 8.38763L34.9411 10.2369C37.4027 12.042 38.8972 15.036 38.8972 18.1621Z"
                    fill="#F4683F" />
                <path
                    d="M20.0036 24.341C18.9205 24.341 18.0222 23.153 18.0222 21.7203V18.5754C18.0222 17.1427 18.9205 15.9546 20.0036 15.9546C21.0868 15.9546 21.985 17.1427 21.985 18.5754V21.7203C21.985 23.1879 21.0868 24.341 20.0036 24.341Z"
                    fill="white" />
            </svg>
            <span class="btns__text">Искать</span>
        </button>
        <svg class="btns__svg-background" width="272" height="56" viewBox="0 0 272 56" fill="none"
            xmlns="http://www.w3.org/2000/svg">
            <path opacity="0.26" fill-rule="evenodd" clip-rule="evenodd"
                d="M107.552 10.2778C104.415 5.85721 99.598 2.54182 93.9963 1.21566C91.5316 0.442062 88.0586 0 84.3615 0C80.6644 0 77.3034 0.442062 74.7266 1.21566C69.125 2.54182 64.4196 5.85721 61.1706 10.2778C58.4818 13.9247 57.0254 18.4558 57.0254 23.4289V31.9384C57.0254 36.801 58.5938 41.3321 61.1706 45.0896C64.1955 49.3996 68.6768 52.494 73.9424 53.9306C76.5192 54.8148 80.2162 55.4779 84.3615 55.4779C88.5067 55.4779 92.2038 54.9253 94.7806 53.9306C100.046 52.494 104.527 49.2891 107.552 45.0896C110.241 41.3321 111.81 36.9115 111.81 31.9384V23.4289C111.81 18.4558 110.241 13.9247 107.552 10.2778ZM97.2453 22.4343V32.712C97.2453 36.0275 96.0129 39.1218 94.1084 41.5531L93.4362 42.2162C88.6187 47.4104 80.2162 47.4104 75.3988 42.2162L74.7266 41.5531C72.71 39.1218 71.5897 36.0275 71.5897 32.712V22.4343C71.5897 19.1188 72.8221 16.0245 74.7266 13.5932C74.7266 13.5932 74.7266 13.4827 74.8386 13.4827C79.7681 7.51494 89.0669 7.51494 93.9963 13.4827C93.9963 13.4827 93.9963 13.5932 94.1084 13.5932C96.0129 16.0245 97.2453 19.1188 97.2453 22.4343ZM0 7.40433L0 49.0679C0 52.4939 2.80084 55.2567 6.27387 55.2567H27.3361C40.1079 55.2567 50.527 45.0895 50.527 32.3804V23.8709C50.527 11.2723 40.2199 0.994515 27.3361 0.994515L6.27387 0.994515C2.80084 1.21554 0 3.9784 0 7.40433ZM21.5104 47.5208H13.444L13.444 8.95151H21.5104C29.4647 8.95151 35.8506 15.2508 35.8506 23.0972V33.375C35.8506 41.2215 29.4647 47.5208 21.5104 47.5208ZM208.27 55.2569C204.573 55.2569 201.548 52.2731 201.548 48.6261V7.84658C201.548 4.19963 204.573 1.21576 208.27 1.21576C211.967 1.21576 214.992 4.19963 214.992 7.84658V48.6261C214.992 52.3836 211.967 55.2569 208.27 55.2569ZM254.989 27.297L270.674 46.1948C272.578 48.6261 272.466 52.052 270.113 54.0413C267.761 56.0305 264.176 55.699 262.159 53.2677L246.026 33.8173L242.217 29.3967V48.6261C242.217 52.2731 239.192 55.2569 235.495 55.2569C231.798 55.2569 228.773 52.2731 228.773 48.6261V7.84658C228.773 4.19963 231.798 1.21576 235.495 1.21576C239.192 1.21576 242.217 4.19963 242.217 7.84658V25.3077L245.018 21.8818L259.918 3.31551C261.823 0.884209 265.408 0.552682 267.873 2.43141C270.338 4.31015 270.674 7.84656 268.769 10.2779L254.989 27.297ZM188.104 8.73067V9.17272V9.83581V50.2838C188.104 53.0466 185.864 55.2569 183.063 55.2569C180.262 55.2569 178.021 53.0466 178.021 50.2838V16.4666V12.8197L176.789 15.8035L176.677 16.0246L162.561 47.742C162.561 47.8525 162.449 48.0735 162.337 48.1841C161.216 50.8364 158.303 52.7151 155.054 52.4941C152.59 52.3836 150.349 51.0574 149.117 49.1787L149.117 49.1785C148.78 48.7365 148.444 48.2945 148.22 47.742L134.104 16.0246L133.992 15.8035L132.76 12.8197V16.4666V50.2838C132.76 53.0466 130.519 55.2569 127.718 55.2569C124.917 55.2569 122.677 53.0466 122.677 50.2838V9.83581C122.677 9.65329 122.711 9.50427 122.741 9.37031C122.766 9.26093 122.789 9.16158 122.789 9.06223C122.677 8.95172 122.677 8.84119 122.677 8.73067C122.453 4.86269 126.374 1.5473 131.415 1.21576H131.527H132.424H132.872H133.208C135 1.32627 136.569 1.87883 137.913 2.65242C139.482 3.53653 140.49 4.64167 141.274 6.07835V6.18887C141.274 6.24413 141.302 6.29938 141.33 6.35464C141.358 6.40989 141.386 6.46514 141.386 6.5204L155.054 38.2378L155.391 38.9009L155.727 38.2378L169.395 6.5204C169.395 6.40988 169.395 6.29939 169.507 6.18887V6.07835C170.291 4.64167 171.299 3.42602 172.868 2.65242C174.212 1.87883 175.781 1.32627 177.573 1.21576H177.909H178.357L179.254 1.21576H179.366C184.407 1.5473 188.328 4.86269 188.104 8.73067Z"
                fill="#5D6678" />
        </svg>

    </div>
</div>